webpackJsonp([20],{"9bBU":function(t,e,a){a("mClu");var i=a("FeBl").Object;t.exports=function(t,e,a){return i.defineProperty(t,e,a)}},C4MV:function(t,e,a){t.exports={default:a("9bBU"),__esModule:!0}},H7AV:function(t,e){},bOdI:function(t,e,a){"use strict";e.__esModule=!0;var i,r=a("C4MV"),n=(i=r)&&i.__esModule?i:{default:i};e.default=function(t,e,a){return e in t?(0,n.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},gHIh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("OgVB");var i=a("/Lyv"),r=a.n(i),n=a("mvHQ"),s=a.n(n),o=a("bOdI"),l=a.n(o),d={name:"giverecord",props:{isCurrent:{type:Boolean}},watch:{isCurrent:function(t,e){t&&this.group.arr.length}},data:function(){var t;return t={starttime:0,endtime:0,startDate:new Date("2017-01-01"),endDate:new Date,startTimestr:"",endTimestr:"",clubid:"",userid:"",hasClick:!1,selected:"1",selectOne:"-1"},l()(t,"hasClick",!1),l()(t,"group",{arr:[],totalCount:0,nextPage:0,totalPages:0}),t},methods:{onValuesChange:function(t,e){e[0]>e[1]&&t.setSlotValue(1,e[0])},open:function(){this.$refs.picker.open()},open2:function(){this.$refs.pickerend.open()},handleConfirmS:function(t){this.starttime=t,this.startTimestr=this.formateTimeObj(t)+" 00:00:00"},handleConfirmE:function(t){this.endtime=t,this.endTimestr=this.formateTimeObj(t)+" 23:59:59"},formateTimeObj:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return a<10&&(a="0"+a),i<10&&(i="0"+i),e+"-"+a+"-"+i},loadMore:function(){var t={params:{functionname:"GetClubLogPlatformScoreList",body:s()({nType:9,targetid:""==this.userid?"0":parseInt(this.userid),nClubID:this.selectOne,startDate:this.startTimestr,endDate:this.endTimestr,pageIndex:this.group.nextPage,pageSize:this.PAGESIZE})}};this.getList(t)},getList:function(t){var e=this;this.$http.get(this.baseUrl+"/Main/GetData",t).then(function(t){var a=t.data;e.hasClick=!0,1==a.code?(e.group.arr=e.group.arr.concat(a.body),e.group.nextPage=e.group.nextPage+1,e.group.totalPages=Math.ceil(a.totalCount/e.PAGESIZE),e.group.totalCount=a.totalCount):r()("提示",a.msg)})},search:function(){if("-1"==this.selectOne)return r()("提示","请先选择俱乐部"),!1;if(""==this.startTime)return r()("提示","起始时间不能为空"),!1;if(""==this.endTime)return r()("提示","结束时间不能为空"),!1;this.group={arr:[],totalCount:0,nextPage:0,totalPages:0};var t={params:{functionname:"GetClubLogPlatformScoreList",body:s()({nType:9,targetid:""==this.userid?"0":parseInt(this.userid),nClubID:this.selectOne,startDate:this.startTimestr,endDate:this.endTimestr,pageIndex:this.group.nextPage,pageSize:this.PAGESIZE})}};this.getList(t)}},created:function(){var t=new Date;this.endTimestr=this.formateTimeObj(t)+" 23:59:59";var e=new Date(t-2592e6);this.startTimestr=this.formateTimeObj(e)+" 00:00:00"},mounted:function(){}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"giverecord"}},[a("div",{staticClass:"select"},[a("label",[t._v("俱乐部选择")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectOne,expression:"selectOne"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectOne=e.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:""},domProps:{value:-1}},[t._v("点击选择 -- 俱乐部")]),t._v(" "),t._l(t.$store.state.clubList,function(e,i){return a("option",{key:i,domProps:{value:e.nClubID}},[t._v(t._s(e.szClubName))])})],2)]),t._v(" "),a("div",{on:{click:t.open}},[a("mt-field",{attrs:{label:"起始时间",disableClear:!0,readonly:!0,placeholder:"点击选择时间",state:""==t.startTimestr?"warning":""},model:{value:t.startTimestr,callback:function(e){t.startTimestr="string"==typeof e?e.trim():e},expression:"startTimestr"}})],1),t._v(" "),a("div",{on:{click:t.open2}},[a("mt-field",{attrs:{label:"结束时间",disableClear:!0,readonly:!0,placeholder:"点击选择时间",state:""==t.endTimestr?"warning":""},model:{value:t.endTimestr,callback:function(e){t.endTimestr="string"==typeof e?e.trim():e},expression:"endTimestr"}})],1),t._v(" "),a("mt-field",{attrs:{label:"用户id",disableClear:!0,placeholder:"用户id"},model:{value:t.userid,callback:function(e){t.userid="string"==typeof e?e.trim():e},expression:"userid"}}),t._v(" "),a("div",{staticStyle:{padding:"15px 10px"}},[a("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(e){t.search(e)}}},[t._v("查询")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.hasClick,expression:"hasClick"}],staticClass:"result"},[a("div",{staticClass:"head"},[t._v("查询结果")]),t._v(" "),a("div",{staticClass:"hasresult"},[t._l(t.group.arr,function(e,i){return a("div",{key:i,staticClass:"record"},[a("div",{staticStyle:{width:"80px"}},[a("span",{staticClass:"title"},[t._v("时间")]),a("br"),a("span",[t._v(t._s(e.CreateTime))])]),t._v(" "),a("div",{staticStyle:{flex:"1",overflow:"hidden"}},[a("span",{staticClass:"title"},[t._v("获赠者")]),a("br"),a("span",[t._v(t._s(e.szNickName))])]),t._v(" "),a("div",{staticStyle:{width:"70px"}},[a("span",{staticClass:"title"},[t._v("用户id")]),a("br"),a("span",[t._v(t._s(e.targetid))])]),t._v(" "),a("div",{staticStyle:{width:"75px"}},[a("span",{staticClass:"title"},[t._v(" 积分数量")]),a("br"),a("span",[t._v(t._s(e.nAmount))])]),t._v(" "),a("div",{staticStyle:{width:"75px",overflow:"hidden"}},[a("span",{staticClass:"title"},[t._v(" 操作账号")]),a("br"),a("span",[t._v(t._s(e.accountName))])])])}),t._v(" "),0==t.group.arr.length?a("div",{staticClass:"noresult"},[t._v("\n               无记录\n            ")]):t._e(),t._v(" "),t.group.arr.length>0?a("div",[a("div",{staticStyle:{margin:"15px 0px"}},[t.group.nextPage<t.group.totalPages?a("mt-button",{attrs:{type:"primary",size:"large"},nativeOn:{click:function(e){t.loadMore(e)}}},[t._v("加载更多")]):a("mt-button",{attrs:{type:"default",size:"large"}},[t._v("已无更多数据")])],1)]):t._e()],2)]),t._v(" "),a("mt-datetime-picker",{ref:"picker",attrs:{type:"date",startDate:t.startDate,endDate:t.endDate,"year-format":"{value}年","month-format":"{value}月","date-format":"{value}日"},on:{confirm:t.handleConfirmS},model:{value:t.starttime,callback:function(e){t.starttime="string"==typeof e?e.trim():e},expression:"starttime"}}),t._v(" "),a("mt-datetime-picker",{ref:"pickerend",attrs:{type:"date",startDate:t.startDate,endDate:t.endDate,"year-format":"{value}年","month-format":"{value}月","date-format":"{value}日"},on:{confirm:t.handleConfirmE},model:{value:t.endtime,callback:function(e){t.endtime="string"==typeof e?e.trim():e},expression:"endtime"}})],1)},staticRenderFns:[]};var c=a("VU/8")(d,u,!1,function(t){a("H7AV")},"data-v-52cdb960",null);e.default=c.exports},mClu:function(t,e,a){var i=a("kM2E");i(i.S+i.F*!a("+E39"),"Object",{defineProperty:a("evD5").f})}});
//# sourceMappingURL=20.be7484c8ed0ed9155074.js.map